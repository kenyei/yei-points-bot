# YEI Points Bot

一個自動化的 DeFi 協議互動機器人，用於在 Sei 區塊鏈上進行 YEI Finance 協議的供應和借貸操作。

## 功能特色

- 🔄 自動化供應和借貸循環操作
- ⏰ 支援多錢包排程執行
- 💰 智能健康因子管理
- 🛡️ 安全的私鑰管理
- 📊 即時餘額監控

## 專案結構

```
yei-points-bot/
├── main.py          # 主程式 - 執行自動化供應借貸循環
├── schedule.py      # 排程工具 - 為錢包生成隨機執行時間
├── bot.py           # 核心機器人邏輯
├── abi.py           # 智能合約 ABI 定義
├── wallets.json     # 錢包配置檔案
├── schedule.json    # 執行排程檔案
└── README.md        # 專案說明文件
```

## 安裝需求

確保你已安裝 Python 3.8+ 和 uv 套件管理器。

```bash
# 安裝相依套件
uv sync
```

## 使用方法

### 1. 設定錢包檔案

建立 `wallets.json` 檔案，包含你的錢包資訊：

```json
[
  {
    "address": "0x你的錢包地址1",
    "pk": "你的私鑰1"
  },
  {
    "address": "0x你的錢包地址2",
    "pk": "你的私鑰2"
  }
]
```

### 2. 生成執行排程

使用 `schedule.py` 為每個錢包分配隨機執行時間：

```bash
# 基本用法 - 設定開始和結束時間戳記
python schedule.py --start 1754542179 --end 1754552179
```

這個指令會讀取 `wallets.json` 中的錢包地址，為每個地址在指定的時間範圍內分配一個隨機時間戳記，並將結果儲存到 `schedule.json`。

### 3. 執行主程式

確保已設定好 `wallets.json` 和 `schedule.json` 後，執行主程式：

```bash
python main.py
```

## 主程式功能 (main.py)

### 核心功能

1. **錢包管理**

   - 載入多個錢包配置
   - 管理私鑰和地址映射

2. **排程執行**

   - 根據 `schedule.json` 中的時間戳記執行操作
   - 支援多錢包並行排程

3. **自動化操作流程**
   ```
   檢查餘額 → 轉換 SEI 為 WSEI → 供應抵押品 → 借貸循環 → 監控健康因子
   ```

### 操作邏輯

1. **餘額檢查與轉換**

   - 檢查 SEI 和 WSEI 餘額
   - 保留 10 SEI 作為手續費
   - 將多餘的 SEI 轉換為 WSEI

2. **供應與借貸循環**

   - 供應 WSEI 作為抵押品
   - 計算可借貸金額（抵押品的 80%）
   - 借出 WSEI 並再次供應
   - 重複直到健康因子接近最低閾值 (1.1)

3. **風險管理**
   - 最低健康因子設定為 1.1
   - 每次借貸使用 99% 的可借貸金額以留安全邊際

## 排程工具功能 (schedule.py)

`schedule.py` 是一個簡單的工具，用於為每個錢包地址生成隨機執行時間。它會讀取 `wallets.json` 檔案中的錢包地址，在指定的時間範圍內為每個地址分配一個隨機的 Unix 時間戳記，然後將結果儲存到 `schedule.json` 檔案中。

需要提供開始時間 (`--start`) 和結束時間 (`--end`) 兩個必要參數，時間格式為 Unix 時間戳記。
